<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Pods Operations | Casskop</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Casskop"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Here is the list of Operations managed by CassKop at the **Pod operations** level, which apply at pod level and can be triggered by specifics pods labels. Status of pod operations are also followed up at rack level."><meta data-react-helmet="true" property="og:description" content="Here is the list of Operations managed by CassKop at the **Pod operations** level, which apply at pod level and can be triggered by specifics pods labels. Status of pod operations are also followed up at rack level."><meta data-react-helmet="true" property="og:url" content="https://orange-opensource.github.io/casskop/docs/5_operations/2_pods_operations">

<link data-react-helmet="true" rel="shortcut icon" href="/casskop/img/casskop.ico">


<link rel="stylesheet" href="/casskop/styles.fd86d1d7.css">


<link rel="preload" href="/casskop/styles.191f2f15.js" as="script">

<link rel="preload" href="/casskop/runtime~main.f8295aaf.js" as="script">

<link rel="preload" href="/casskop/main.3f05d527.js" as="script">

<link rel="preload" href="/casskop/1.6b5a90ca.js" as="script">

<link rel="preload" href="/casskop/2.e9ab7e35.js" as="script">

<link rel="preload" href="/casskop/3.03274d9e.js" as="script">

<link rel="preload" href="/casskop/1be78505.47c4f31f.js" as="script">

<link rel="preload" href="/casskop/3cde0363.23eb6708.js" as="script">

<link rel="preload" href="/casskop/17896441.2aa5f230.js" as="script">

<link rel="preload" href="/casskop/f5a90551.728a2133.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/casskop/"><img class="navbar__logo" src="/casskop/img/casskop_alone.png" alt="Casskop Logo"><strong>Casskop</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/casskop/docs/1_concepts/1_introduction">Docs</a><a class="navbar__item navbar__link" href="/casskop/blog">Blog</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/Orange-OpenSource/casskop">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/casskop/"><img class="navbar__logo" src="/casskop/img/casskop_alone.png" alt="Casskop Logo"><strong>Casskop</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/1_concepts/1_introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/Orange-OpenSource/casskop">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/casskop/img/casskop_alone.png" alt="Casskop Logo"><strong>Casskop</strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/1_concepts/1_introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/1_concepts/2_features">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/1_concepts/3_design_principes">Design Principes</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/1_concepts/4_roadmap">Roadmap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/2_setup/1_getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/2_setup/2_install_plugin">Install Plugin</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/2_setup/3_multi_casskop">Multi-CassKop</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Platform Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/2_setup/2_platform_setup/1_gke">Google Kubernetes Engine</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/2_setup/2_platform_setup/2_minikube">MiniKube</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/0_customizable_install_with_helm">Customizable install with Helm</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/1_cassandra_cluster">Cassandra Cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/2_cassandra_configuration">Cassandra Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/3_storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/4_sidecars">Sidecars</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/5_kubernets_objects">Kubernetes Objects</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/6_cpu_memory_usage">CPU and Memory Usage</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/7_cluster_topology">Cluster topology</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/8_implementation_architecture">Implementation architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/9_advanced_configuration">Advanced Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/10_nodes_management">Nodes Management</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/3_configuration_deployment/11_cassandra_cluster_status">CassandraCluster Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/5_operations/1_cluster_operations">Cluster Operations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/casskop/docs/5_operations/2_pods_operations">Pods Operations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Upgrade</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/5_operations/3_upgrading/1_upgrade_operator">Upgrade Operator</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/5_operations/3_upgrading/2_upgrade_bootstrap_image">Upgrade Bootstrap Image</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Uninstall</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/5_operations/4_uninstall/1_casskop">Casskop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MultiCasskop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/5_operations/5_multicasskop/1_cassandra_cluster">Cassandra Cluster</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cassandra Cluster</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/6_references/1_cassandra_cluster/1_cassandra_cluster">Cassandra cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/6_references/1_cassandra_cluster/2_topology">Topology</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/6_references/1_cassandra_cluster/3_cassandra_cluster_status">Cassandra cluster Status</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MultiCasskop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/6_references/2_multicasskop/1_multicasskop">MultiCasskop</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/7_troubleshooting/1_operations_issues">Operations Issues</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/7_troubleshooting/2_gke_issues">GKE Issues</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/8_contributing/1_developer_guide">Developer guide</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/8_contributing/2_release_guide">Release guide</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/8_contributing/3_reporting_bugs">Reporting bugs</a></li><li class="menu__list-item"><a class="menu__link" href="/casskop/docs/8_contributing/4_credits">Credits</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Pods Operations</h1></header><div class="markdown"><p>Here is the list of Operations managed by CassKop at the <strong>Pod operations</strong> level, which apply at pod level and can be triggered by specifics pods labels. Status of pod operations are also followed up at rack level.</p><p>Some Pods Operations can be triggered automatically by CassKop if :</p><ul><li><code>CassandraCluster.spec.autoPilot</code> is true, that will trigger <code>cleanup</code>, <code>rebuild</code> and <code>upgadesstable</code> operation in
response to cluster events automatically.</li><li>the <code>decommission operation</code> is special and will be triggered automatically each time we need to ScaleDown a Pod.</li><li>the <code>removenode operation</code> is also special and may be set manually when needed.</li></ul><p>It is also possible to trigger operations &quot;manually&quot;, setting some labels on the Pods.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="operationcleanup"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#operationcleanup" title="Direct link to heading">#</a>OperationCleanup</h2><p>A Cleanup may be automatically triggered by CassKop when it ends Scaling the cluster.
CassKop will set some specific labels on the targeted pods.
We can also set these labels manually, or using the privided plugin (<code>kubectl casskop cleanup start</code>)
If we want to see labels for each of the pods of the cluster :</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl label pod $(kubectl get pods -l app=cassandracluster -o jsonpath=&#x27;{range .items[*]}{.metadata.name}{&quot; &quot;}&#x27;) --list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Listing labels for Pod./cassandra-demo-dc1-rack1-0:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> cluster=k8s.pic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> controller-revision-hash=cassandra-demo-dc1-rack1-56c9bbb958</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> dc-rack=dc1-rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> statefulset.kubernetes.io/pod-name=cassandra-demo-dc1-rack1-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> app=cassandracluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> cassandracluster=cassandra-demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> cassandraclusters.db.orange.com.dc=dc1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> cassandraclusters.db.orange.com.rack=rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div></code></pre></div><p>Now, to trigger a <code>cleanup</code> on pod <code>cassandra-demo-dc1-rack2-0</code></p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label pod cassandra-demo-dc1-rack2-0 operation-name=cleanup --overwrite</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label pod cassandra-demo-dc1-rack2-0 operation-status=ToDo --overwrite</span></div></code></pre></div><p>Automatically, CassKop will detect the change, start the action, and update the status :</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-yaml codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">dc1-rack2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">cassandraLastAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> UpdateSeedList</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">endTime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token datetime number" style="color:rgb(247, 140, 108)">2018-09-27T15:26:51Z</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">startTime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token datetime number" style="color:rgb(247, 140, 108)">2018-09-27T15:23:54Z</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">phase</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Running</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">podLastOperation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cleanup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">endTime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token datetime number" style="color:rgb(247, 140, 108)">2018-09-27T16:00:52Z</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">operatorName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> operator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cassandr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">f6d2968d4504448180ace041d3818d10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">799dbb4zqss8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">podsOK</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> cassandra</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">dc1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">rack2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> cassandra</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">dc1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">rack2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">startTime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token datetime number" style="color:rgb(247, 140, 108)">2018-09-27T16:00:32Z</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Done</span></div></code></pre></div><p>The section <code>podLastOperation</code> appears and we can see that it has correctly executed the cleanup operation on the 2
nodes</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="operationrebuild"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#operationrebuild" title="Direct link to heading">#</a>OperationRebuild</h2><p>This operation operates on multiple nodes in the cluster. Use this operation when CassKop add a new datacenter to an
existing cluster.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl casskop rebuild {--pod &lt;pod_name&gt; | --prefix &lt;prefix_pod_name&gt;} &lt;from-dc_name&gt;</span></div></code></pre></div><p>In the background this command is equivalent to set labels on each pods like :</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label pod cassandra-demo-dc2-rack1-0 operation-name=rebuild --overwrite</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label pod cassandra-demo-dc2-rack1-0 operation-status=ToDo --overwrite</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label pod cassandra-demo-dc2-rack1-0 operation-argument=dc1 --overwrite</span></div></code></pre></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="operationdecommission"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#operationdecommission" title="Direct link to heading">#</a>OperationDecommission</h2><p>see <a href="/casskop/docs/5_operations/1_cluster_operations#updatescaledown">UpdateScaleDown</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="rollingrestart"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#rollingrestart" title="Direct link to heading">#</a>RollingRestart</h2><p>This operation can be triggered with the plugin using simple commands as :</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_2GNs"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button><code class="codeBlockLines__q0i" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ k casskop restart --crd cassandra-e2e --rack dc1.rack1 dc2.rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace cassandra-e2e</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc1.rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc2.rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ k casskop restart --crd cassandra-e2e --dc dc1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace cassandra-e2e</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc1.rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc1.rack2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ k casskop restart --crd cassandra-e2e --full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace cassandra-e2e</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc1.rack1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc1.rack2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Trigger restart of dc2.rack1</span></div></code></pre></div><p>After one of this command, CassKop will do a rolling restart of each rack one at a time avoiding any disruption.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Orange-OpenSource//casskop/edit/master/website/docs/5_operations/2_pods_operations.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/casskop/docs/5_operations/1_cluster_operations"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Cluster Operations</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/casskop/docs/5_operations/3_upgrading/1_upgrade_operator"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Upgrade Operator »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#operationcleanup" class="contents__link">OperationCleanup</a></li><li><a href="#operationrebuild" class="contents__link">OperationRebuild</a></li><li><a href="#operationdecommission" class="contents__link">OperationDecommission</a></li><li><a href="#rollingrestart" class="contents__link">RollingRestart</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Getting Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/casskop/docs/1_concepts/1_introduction">Documentation</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/Orange-OpenSource/casskop">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://casskop.slack.com">Slack</a></li><li class="footer__item"><a class="footer__link-item" href="/casskop/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="mailto:prj.casskop.support@list.orangeportails.net">Email</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/Orange-OpenSource/casskop/issues">Feature request</a></li></ul></div></div><div class="text--center">Copyright © 2020 Orange, Inc. Built with Docusaurus.</div></div></footer>
</div>

<script src="/casskop/styles.191f2f15.js"></script>

<script src="/casskop/runtime~main.f8295aaf.js"></script>

<script src="/casskop/main.3f05d527.js"></script>

<script src="/casskop/1.6b5a90ca.js"></script>

<script src="/casskop/2.e9ab7e35.js"></script>

<script src="/casskop/3.03274d9e.js"></script>

<script src="/casskop/1be78505.47c4f31f.js"></script>

<script src="/casskop/3cde0363.23eb6708.js"></script>

<script src="/casskop/17896441.2aa5f230.js"></script>

<script src="/casskop/f5a90551.728a2133.js"></script>


</body>
</html>