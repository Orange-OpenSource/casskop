apiVersion: kuttl.dev/v1beta1
kind: TestStep
timeout: 500
commands:
  - script: |
      wget https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64
      chmod +x jq-linux64
      sudo mv jq-linux64 $(which jq)
---
apiVersion: db.orange.com/v1alpha1
kind: CassandraCluster
metadata:
  name: cassandra-e2e
spec:
  nodesPerRacks: 1
  cassandraImage: cassandra:3.11.9
  dataCapacity: "256Mi"
  hardAntiAffinity: false
  deletePVC: true
  autoPilot: true
  autoUpdateSeedList: true
  dataStorageClass: local-path
  resources:
    limits:
      memory: 512Mi
      cpu: 200m
  topology:
    dc:
      - name: dc1
        rack:
          - name: rack1
          - name: rack2
