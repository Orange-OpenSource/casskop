(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{147:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return c})),r.d(t,"default",(function(){return p}));var a=r(1),n=r(9),s=(r(0),r(193)),o={id:"1_operator_description",title:"Operator Description",sidebar_label:"Operator Description"},i={id:"3_tasks/1_operator_description",title:"Operator Description",description:"## Overview",source:"@site/docs/3_tasks/1_operator_description.md",permalink:"/casskop/docs/3_tasks/1_operator_description",editUrl:"https://github.com/Orange-OpenSource//casskop/edit/master/website/docs/3_tasks/1_operator_description.md",sidebar_label:"Operator Description",sidebar:"docs",previous:{title:"Install Plugin",permalink:"/casskop/docs/2_setup/3_install/2_install_plugin"},next:{title:"Cassandra Cluster",permalink:"/casskop/docs/3_tasks/2_configuration_deployment/1_cassandra_cluster"}},c=[{value:"Overview",id:"overview",children:[{value:"What is a Kubernetes operator",id:"what-is-a-kubernetes-operator",children:[]},{value:"CassKop is our cassandra operator",id:"casskop-is-our-cassandra-operator",children:[]},{value:"Deploying CassKop to Kubernetes",id:"deploying-casskop-to-kubernetes",children:[]}]}],l={rightToc:c};function p(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(s.b)("wrapper",Object(a.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"overview"},"Overview"),Object(s.b)("p",null,"The Cassandra Kubernetes Operator (CassKop) makes it easy to run Apache Cassandra on Kubernetes. Apache Cassandra is\na popular free, open-source distributed wide column store NoSQL database management system."),Object(s.b)("p",null,"CassKop will allow to easily create and manage Rack aware Cassandra Clusters."),Object(s.b)("h3",{id:"what-is-a-kubernetes-operator"},"What is a Kubernetes operator"),Object(s.b)("p",null,"Kubernetes Operators are first-class citizens of a Kubernetes cluster and are\napplication-specific controllers that extends Kubernetes to create, configure, and manage instances of complex applications."),Object(s.b)("p",null,"We have choosen to use a ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/"}),"Custom Resource Definition (CRD)"),"\nwhich creates a new Object Kind named ",Object(s.b)("strong",{parentName:"p"},"CassandraCluster")," in Kubernetes which allow us to :"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Store object and state directly into Kubernetes"),Object(s.b)("li",{parentName:"ul"},"Manage declarative inputs to set up the Cluster"),Object(s.b)("li",{parentName:"ul"},"Declarative Updates - performing workflow actions on an existing CassandraCluster is\nstraightforward. Updating a cluster amounts to updating the required declarative attributes\nin the CRD Yaml with new data and re-applying the CRD using kubectl.\nCassKop's diff-based reconciliation logic ensures that only the required changes are made to a CassandraCluster."),Object(s.b)("li",{parentName:"ul"},"CassKop monitors create/update events for the CRD and performs the required actions."),Object(s.b)("li",{parentName:"ul"},"CassKop runs in a loop and reacts to events as they happen to reconcile a desired\nstate with the actual state of the system.")),Object(s.b)("h3",{id:"casskop-is-our-cassandra-operator"},"CassKop is our cassandra operator"),Object(s.b)("p",null,"CassKop will define a new Kubernetes object named ",Object(s.b)("inlineCode",{parentName:"p"},"CassandraCluster")," which\nwill be used to describe and instantiate a Cassandra Cluster in Kubernetes. Example: "),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/Orange-OpenSource/casskop/samples/cassandracluster-pic-test-acceptance-3.yaml"}),"cluster definition"))),Object(s.b)("p",null,"CassKop is a Kubernetes custom controller which will loop over events on\n",Object(s.b)("inlineCode",{parentName:"p"},"CassandraCluster")," objects and reconcile with kubernetes resources needed to create a valid\nCassandra Cluster deployment."),Object(s.b)("p",null,"CassKop is listening only in the Kubernetes namespace it is deployed in, and is able to manage several Cassandra Clusters within this namespace. "),Object(s.b)("p",null,"When receiving a CassandraCluster object, CassKop will start creating required Kubernetes\nresources, such as Services, Statefulsets, and so on."),Object(s.b)("p",null,"Every time the desired CassandraCluster resource is updated by the user, CassKop performs\ncorresponding updates on the Kubernetes resources, so that the Cassandra cluster reflects the state of the desired cluster resource. Such updates might trigger a rolling update of the pods."),Object(s.b)("p",null,"Finally, when the desired resource is deleted, CassKop starts to undeploy the cluster and delete all related Kubernetes resources. "),Object(s.b)("h3",{id:"deploying-casskop-to-kubernetes"},"Deploying CassKop to Kubernetes"),Object(s.b)("p",null,"See ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"/#deploy-the-cassandra-operator-in-the-cluster"}),"Deploy the Cassandra Operator in the cluster")))}p.isMDXComponent=!0},193:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return h}));var a=r(0),n=r.n(a);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=n.a.createContext({}),p=function(e){var t=n.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i({},t,{},e)),r},u=function(e){var t=p(e.components);return n.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(r),b=a,h=u["".concat(o,".").concat(b)]||u[b]||d[b]||s;return r?n.a.createElement(h,i({ref:t},l,{components:r})):n.a.createElement(h,i({ref:t},l))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=b;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=r[l];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,r)}b.displayName="MDXCreateElement"}}]);